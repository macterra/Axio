# Copilot Operational Agreements

## Python Execution
- Always use `.venv/bin/python` or `source .venv/bin/activate && python`
- The API key is in the venv environment

## Experiment Execution
- LLM runs take 30-40 minutes per seed — **always use `isBackground: true`**
  - This returns control immediately so I can respond to you and check progress
  - Using `isBackground: false` would block the conversation until the run completes
- **CRITICAL: Always use unbuffered output** so progress is visible:
  ```bash
  python -u -m src.rsa_poc.v440.run_llm_baseline ...
  ```
  Never use plain `python` — output will be buffered and invisible to both of us.
- Each seed gets its own dedicated terminal (visible in VS Code)
- After launching: say only "Running in background" with terminal ID — no commentary
- **VERIFY OUTPUT IS FLOWING** — after launching, check `get_terminal_output` within 30 seconds to confirm the run is producing visible progress. If output is empty or just shows the command, STOP and fix before proceeding.
- Check progress using `get_terminal_output` when user signals
- Run `--preflight-only` first (foreground OK, it's fast) before full runs

## Multi-Seed Run Protocol (STRICT)
- **NEVER launch multiple seeds in parallel without explicit user approval**
- Always run seed 42 first, ALONE
- Wait for seed 42 to COMPLETE with visible results
- Update the report with seed 42 results
- Get explicit user approval ("proceed with remaining seeds") before launching 123, 456, 789, 1000
- Only after approval: launch remaining seeds (can be parallel)

## Monitoring Protocol
- User monitors progress, tells me when to check
- When checking, use `get_terminal_output` on the specific terminal ID
- Do not use `pgrep` or other commands that might interfere

## Pre-LLM Validation
- Run full oracle-only validation before spending API tokens
- All 5 preregistered seeds (42, 123, 456, 789, 1000) must pass
- Only proceed to LLM runs after user approval

## Test Coverage Before LLM Runs
- **Never spend real money on LLM runs until highly confident code won't hit programming bugs**
- All new code paths must have unit tests before launching expensive runs
- If a run fails due to AttributeError/TypeError/etc., add a regression test that would have caught it
- Run full test suite (`pytest src/rsa_poc/v440/tests/`) and confirm all pass before launching
- **After code changes, verify the fix is loaded** — Python caches imports; old terminals use old code

## LLM Run Protocol
- Always run 1 seed first (seed 42)
- Update the report with results from first seed
- Get user approval before launching remaining 4 seeds

## Preregistered Seeds
- 42, 123, 456, 789, 1000 (N=5 for statistical validity)

## Code Freeze
- Implementation frozen after E2 calibration passes
- No changes during baseline runs

## Results Location
- v4.3 results go to `src/rsa_poc/v430/results/`
